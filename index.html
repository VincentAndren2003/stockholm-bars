<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stockholm Bar Map ‚Äî Billigaste √ñlen</title>
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css" rel="stylesheet"/>
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
  <style>
    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    :root { --gold:#f5c542;--amber:#e08c00;--dark:#0e0c09;--dark2:#1a1710;--card:#201e19;--text:#f0ead8;--muted:#7a7060;--green:#5ecb7a; }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'DM Sans',sans-serif;background:var(--dark);color:var(--text);height:100vh;overflow:hidden;}
    header{position:fixed;top:0;left:0;right:0;z-index:100;padding:14px 24px;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(to bottom, rgba(14,12,9,0.97), transparent);pointer-events:none;}
    .logo{pointer-events:all;display:flex;align-items:baseline;gap:8px;}
    .logo h1{font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:2px;color:var(--gold);line-height:1;}
    .logo span{font-size:11px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;}
    .filter-bar{pointer-events:all;display:flex;align-items:center;gap:8px;background:rgba(26,23,16,0.92);border:1px solid rgba(245,197,66,0.2);border-radius:100px;padding:6px 8px;backdrop-filter:blur(12px);}
    .filter-bar label{font-size:11px;color:var(--muted);padding:0 6px;white-space:nowrap;letter-spacing:0.5px;}
    .filter-bar input[type="range"]{-webkit-appearance:none;width:120px;height:3px;background:linear-gradient(to right, var(--gold) 0%, var(--gold) 50%, rgba(255,255,255,0.1) 50%);border-radius:2px;outline:none;}
    .filter-bar input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:var(--gold);cursor:pointer;border:2px solid var(--dark);}
    #price-display{font-size:13px;font-weight:500;color:var(--gold);min-width:60px;}
    #map{width:100%;height:100vh;}
    #sidebar{position:fixed;top:0;right:-360px;width:340px;height:100vh;background:var(--dark2);border-left:1px solid rgba(245,197,66,0.15);z-index:200;transition:right 0.35s cubic-bezier(0.4,0,0.2,1);display:flex;flex-direction:column;overflow:hidden;}
    #sidebar.open{right:0;}
    .sidebar-header{padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,0.06);}
    .sidebar-header .bar-name{font-family:'Bebas Neue',sans-serif;font-size:26px;letter-spacing:1.5px;color:var(--text);line-height:1.1;}
    .sidebar-header .bar-address{font-size:12px;color:var(--muted);margin-top:4px;}
    .sidebar-close{position:absolute;top:16px;right:16px;background:rgba(255,255,255,0.05);border:none;color:var(--muted);width:30px;height:30px;border-radius:50%;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all 0.2s;}
    .sidebar-close:hover{background:rgba(255,255,255,0.1);color:var(--text);}
    .price-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(245,197,66,0.1);border:1px solid rgba(245,197,66,0.3);border-radius:8px;padding:12px 16px;margin:16px 20px;}
    .price-badge .beer-icon{font-size:24px;}
    .price-badge .price-info{display:flex;flex-direction:column;}
    .price-badge .price-amount{font-family:'Bebas Neue',sans-serif;font-size:32px;color:var(--gold);line-height:1;}
    .price-badge .price-label{font-size:11px;color:var(--muted);margin-top:2px;}
    .sidebar-meta{padding:0 20px;display:flex;flex-direction:column;gap:12px;}
    .meta-row{display:flex;align-items:center;gap:10px;font-size:13px;color:var(--muted);}
    .meta-row a{color:var(--text);text-decoration:none;font-size:13px;border-bottom:1px solid rgba(255,255,255,0.1);transition:color 0.2s;}
    .meta-row a:hover{color:var(--gold);border-color:var(--gold);}
    .sidebar-footer{margin-top:auto;padding:16px 20px;border-top:1px solid rgba(255,255,255,0.06);}
    .suggest-btn{width:100%;padding:12px;background:transparent;border:1px solid rgba(245,197,66,0.3);color:var(--gold);border-radius:8px;font-family:'DM Sans',sans-serif;font-size:13px;cursor:pointer;transition:all 0.2s;letter-spacing:0.5px;}
    .suggest-btn:hover{background:rgba(245,197,66,0.08);border-color:var(--gold);}
    .stats-bar{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);display:flex;gap:1px;background:rgba(245,197,66,0.15);border-radius:12px;overflow:hidden;z-index:100;border:1px solid rgba(245,197,66,0.2);}
    .stat{background:rgba(14,12,9,0.92);backdrop-filter:blur(12px);padding:10px 20px;display:flex;flex-direction:column;align-items:center;}
    .stat-value{font-family:'Bebas Neue',sans-serif;font-size:20px;color:var(--gold);line-height:1;}
    .stat-label{font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-top:2px;}
    #loading{position:fixed;inset:0;background:var(--dark);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:999;gap:16px;transition:opacity 0.5s;}
    #loading h2{font-family:'Bebas Neue',sans-serif;font-size:36px;letter-spacing:3px;color:var(--gold);}
    #loading p{font-size:13px;color:var(--muted);}
    .spinner{width:32px;height:32px;border:2px solid rgba(245,197,66,0.2);border-top-color:var(--gold);border-radius:50%;animation:spin 0.8s linear infinite;}
    @keyframes spin{to{transform:rotate(360deg);}}
    .mapboxgl-popup-content{background:var(--card) !important;border:1px solid rgba(245,197,66,0.25) !important;border-radius:10px !important;padding:12px 14px !important;color:var(--text) !important;box-shadow:0 8px 32px rgba(0,0,0,0.6) !important;}
    .mapboxgl-popup-tip{display:none !important;}
    .popup-name{font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:1px;margin-bottom:4px;}
    .popup-price{font-size:22px;font-weight:500;color:var(--gold);}
    .popup-price span{font-size:12px;color:#7a7060;font-weight:300;}
    .popup-open{margin-top:8px;font-size:11px;color:#7a7060;cursor:pointer;text-decoration:underline;background:none;border:none;color:var(--muted);padding:0;font-family:'DM Sans',sans-serif;}
    .popup-open:hover{color:var(--gold);}
    #modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:500;display:none;align-items:center;justify-content:center;}
    #modal-overlay.open{display:flex;}
    .modal{background:var(--dark2);border:1px solid rgba(245,197,66,0.2);border-radius:16px;padding:28px;width:320px;display:flex;flex-direction:column;gap:14px;}
    .modal h3{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:1px;color:var(--gold);}
    .modal p{font-size:12px;color:var(--muted);line-height:1.6;}
    .modal input{width:100%;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:10px 12px;color:var(--text);font-family:'DM Sans',sans-serif;font-size:14px;outline:none;transition:border 0.2s;}
    .modal input:focus{border-color:rgba(245,197,66,0.5);}
    .modal input::placeholder{color:var(--muted);}
    .modal-btns{display:flex;gap:8px;}
    .modal-btns button{flex:1;padding:10px;border-radius:8px;font-family:'DM Sans',sans-serif;font-size:13px;cursor:pointer;border:none;transition:all 0.2s;}
    .btn-cancel{background:rgba(255,255,255,0.05);color:var(--muted);}
    .btn-cancel:hover{background:rgba(255,255,255,0.1);}
    .btn-submit{background:var(--gold);color:var(--dark);font-weight:600;}
    .btn-submit:hover{background:#ffd666;}
    .marker-unknown{opacity:0.4;}
    /* Pin: icon on top, line points down to building */
    .marker-pin{display:flex;flex-direction:column;align-items:center;cursor:pointer;}
    .marker-pin .marker-icon{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;box-shadow:0 2px 8px rgba(0,0,0,0.5);flex-shrink:0;}
    .marker-pin .marker-line{width:2px;height:18px;background:var(--gold);opacity:0.9;}
  </style>
</head>
<body>

<div id="loading">
  <div class="spinner"></div>
  <h2>üç∫ Stockholm Bars</h2>
  <p>Fetching the cheapest beers in the city...</p>
</div>

<header>
  <div class="logo">
    <h1>Billigaste √ñlen</h1>
    <span>Stockholm Beer Prices</span>
  </div>
  <div class="filter-bar">
    <label>Max price</label>
    <input type="range" id="price-filter" min="40" max="150" value="150" step="5"/>
    <span id="price-display">All prices</span>
  </div>
</header>

<div id="map"></div>

<div class="stats-bar">
  <div class="stat">
    <span class="stat-value" id="stat-bars">‚Äî</span>
    <span class="stat-label">Bars shown</span>
  </div>
  <div class="stat">
    <span class="stat-value" id="stat-cheapest">‚Äî</span>
    <span class="stat-label">Cheapest beer</span>
  </div>
  <div class="stat">
    <span class="stat-value" id="stat-avg">‚Äî</span>
    <span class="stat-label">Avg price</span>
  </div>
</div>

<div id="sidebar">
  <div class="sidebar-header">
    <button class="sidebar-close" onclick="closeSidebar()">‚úï</button>
    <div class="bar-name" id="sb-name">Bar Name</div>
    <div class="bar-address" id="sb-address">Address</div>
  </div>

  <div class="price-badge">
    <span class="beer-icon">üç∫</span>
    <div class="price-info">
      <span class="price-amount" id="sb-price">‚Äî</span>
      <span class="price-label" id="sb-beer-name">Cheapest beer</span>
    </div>
  </div>

  <div class="sidebar-meta">
    <div class="meta-row">
      <span>üåê</span>
      <a id="sb-website" href="#" target="_blank">Visit website</a>
    </div>
    <div class="meta-row">
      <span>üïê</span>
      <span id="sb-updated">Last updated ‚Äî</span>
    </div>
    <div class="meta-row">
      <span>üíÉ</span>
      <span id="sb-dance">Dance floor ‚Äî</span>
    </div>
    <div class="meta-row">
      <span>‚è∞</span>
      <span id="sb-hours">Opening hours ‚Äî</span>
    </div>
  </div>

  <div class="sidebar-footer">
    <button class="suggest-btn" onclick="openModal()">‚úèÔ∏è Suggest a price update</button>
  </div>
</div>

<div id="modal-overlay">
  <div class="modal">
    <h3>Suggest a Price</h3>
    <p>Know the current beer price here? Help keep the map up to date.</p>
    <input type="number" id="modal-price" placeholder="Beer price in SEK (e.g. 79)"/>
    <input type="text" id="modal-beer" placeholder="Beer name (optional)"/>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn-submit" onclick="submitSuggestion()">Submit</button>
    </div>
  </div>
</div>

<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
// load local config (file must exist locally but be ignored by git)
import { SUPABASE_URL, SUPABASE_ANON_KEY, MAPBOX_TOKEN } from './env-config.js';
mapboxgl.accessToken = MAPBOX_TOKEN;

if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {
  console.error('Missing Supabase config: create env-config.js in project root (ignored by git).');
}

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

const map = new mapboxgl.Map({
  container:'map',
  style:'mapbox://styles/mapbox/dark-v11',
  center:[18.0686,59.3293],
  zoom:13,
  pitch:30
});
map.addControl(new mapboxgl.NavigationControl({showCompass:false}),'bottom-right');

let allBars=[]; let markers=[]; let activeSidebarBar=null;

// Require at least 4 decimal places (~10m accuracy); low precision = wrong place on map
function hasEnoughPrecision(num, minDecimals){
  if (num == null || typeof num !== 'number' || isNaN(num)) return false;
  const s = String(Number(num));
  const i = s.indexOf('.');
  const decimals = i === -1 ? 0 : s.length - i - 1;
  return decimals >= (minDecimals || 4);
}

// Normalize address from DB: fix encoding, hidden chars, and format for Mapbox
function normalizeAddress(value){
  if(value == null || value === '') return '';
  let s = String(value)
    .replace(/\uFEFF/g, '')           // BOM
    .replace(/[\r\n\t]+/g, ' ')        // newlines/tabs -> space
    .replace(/\s+/g, ' ')              // collapse spaces
    .trim();
  // Keep only chars that are normal in Swedish addresses (letters, digits, comma, period, hyphen, space, √•√§√∂)
  s = s.replace(/[^\p{L}\p{N}\s,.\-]/gu, '').replace(/\s+/g, ' ').trim();
  return s;
}

async function geocodeAddress(address){
  const raw = normalizeAddress(address);
  if(!raw || raw === "Address not found") return null;

  // Mapbox expects "Street number, Locality, Country". Always add Stockholm/S√∂der so it's unambiguous.
  const hasLocality = /Stockholm|S√∂dermalm|S√∂der|^\d{3}\s?\d{2}/i.test(raw);
  const query = hasLocality ? raw : raw + ', S√∂dermalm, Stockholm, Sweden';

  const params = new URLSearchParams({
    access_token: mapboxgl.accessToken,
    country: 'se',
    types: 'address,place,poi',
    limit: '1',
    language: 'sv',
    fuzzyMatch: 'true',
    autocomplete: 'false',
    bbox: '18.02,59.30,18.10,59.34',
    proximity: '18.0686,59.3172'
  });
  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(query)}.json?${params}`;
  try{
    const resp = await fetch(url);
    const data = await resp.json();
    if (data.features && data.features.length > 0) {
      const f = data.features[0];
      return f.center;
    }
  }catch(e){ console.error("Geocode error for", address, e); }
  return null;
}

async function loadBars(){
  try{
    const { data: bars, error } = await supabase.from('bars').select('*');
    if(error){
      console.error("Supabase error fetching bars:", error);
      hideLoading();
      return;
    }
    console.log("Supabase: bars count =", (bars && bars.length) || 0);
    (bars || []).slice(0,5).forEach(b => console.log("sample:", b));

    allBars = await Promise.all((bars || []).map(async row => {
      let opening_hours = null;
      try{
        if(row.opening_hours){
          opening_hours = (typeof row.opening_hours === 'string') ? JSON.parse(row.opening_hours) : row.opening_hours;
        }
      }catch(e){
        opening_hours = row.opening_hours || null;
      }

      const address = normalizeAddress(row.location || row.address || '') || 'Stockholm';
      let lat = row.lat != null ? Number(row.lat) : null;
      let lng = row.lng != null ? Number(row.lng) : null;

      // Only use DB coords if they're inside S√∂der AND have full precision (4+ decimals).
      // Rounded coords (e.g. 59.32, 18.06) put markers in the wrong place.
      const inSoder = lat != null && lng != null && lng >= 18.02 && lng <= 18.10 && lat >= 59.30 && lat <= 59.34;
      const precise = hasEnoughPrecision(lat, 4) && hasEnoughPrecision(lng, 4);
      if (!inSoder || !precise) {
        const coords = await geocodeAddress(address);
        if (coords) { lng = coords[0]; lat = coords[1]; }
      }

      return {
        id: row.id || row.slug || (row.bar_name && row.bar_name.toLowerCase().replace(/\s+/g,'-')) || row.bar_name,
        name: row.bar_name || row.name || 'Unknown',
        address: address,
        lat: lat,
        lng: lng,
        price_found: row.price != null && row.price !== '',
        cheapest_beer_sek: row.price != null ? Number(row.price) : null,
        cheapest_beer_name: row.cheapest_beer_name || null,
        opening_hours: opening_hours,
        last_updated: row.updated_at || row.created_at || null,
        website: row.website || null,
        dance_floor: row.dance_floor || 'unknown',
        dance_notes: row.dance_notes || null
      };
    }));

    console.log("Loaded bars (allBars.length) =", allBars.length);
    hideLoading();
    renderMarkers(allBars);
    updateStats(allBars.filter(b => b.price_found));
  } catch (err) {
    console.error("loadBars failed:", err);
    hideLoading();
  }
}

function hideLoading(){const el=document.getElementById('loading');el.style.opacity='0';setTimeout(()=>el.style.display='none',500);}

function renderMarkers(bars){
  markers.forEach(m=>m.remove()); markers=[];
  bars.forEach(bar=>{
    if(!bar.lat||!bar.lng)return;
    const el=document.createElement('div');
    el.className='marker-pin';
    const iconBg = bar.price_found ? '#f5c542' : '#3a3530';
    const iconBorder = bar.price_found ? '#e08c00' : '#5a5040';
    el.innerHTML=`<div class="marker-icon" style="background:${iconBg};border:2px solid ${iconBorder}">üç∫</div><div class="marker-line"></div>`;
    const popupContent=`<div class="popup-name">${bar.name}</div>${bar.price_found?`<div class="popup-price">${bar.cheapest_beer_sek} kr <span>/ beer</span></div>`:`<div style="font-size:12px;color:#7a7060;margin-top:4px;">Price unknown</div>`}<button class="popup-open" onclick="window._openSidebar('${bar.id}')">See details ‚Üí</button>`;
    const popup=new mapboxgl.Popup({offset:20, closeButton:false})
      .setLngLat([bar.lng,bar.lat])
      .setHTML(popupContent);

    el.addEventListener('mouseenter',()=>popup.addTo(map));
    el.addEventListener('mouseleave',()=>popup.remove());
    el.addEventListener('click',()=>openSidebar(bar));

    // Anchor at bottom so the tip of the line sits on the building
    const marker=new mapboxgl.Marker({element:el, anchor:'bottom'})
      .setLngLat([bar.lng,bar.lat])
      .addTo(map);
    markers.push(marker);
  });
}

function updateStats(barsWithPrice){
  document.getElementById('stat-bars').textContent=allBars.length;
  if(barsWithPrice.length===0)return;
  const prices=barsWithPrice.map(b=>b.cheapest_beer_sek);
  const min=Math.min(...prices); const avg=Math.round(prices.reduce((a,b)=>a+b,0)/prices.length);
  document.getElementById('stat-cheapest').textContent=min+' kr'; document.getElementById('stat-avg').textContent=avg+' kr';
}

window.openSidebar=function(bar){
  activeSidebarBar=bar;
  // Centre map on the selected bar for clarity
  if(bar.lng != null && bar.lat != null){
    map.flyTo({
      center:[bar.lng, bar.lat],
      zoom:15,
      essential:true
    });
  }
  document.getElementById('sb-name').textContent=bar.name;
  document.getElementById('sb-address').textContent=bar.address||'Stockholm';
  document.getElementById('sb-price').textContent=bar.price_found?bar.cheapest_beer_sek+' kr':'Unknown';
  document.getElementById('sb-beer-name').textContent=bar.cheapest_beer_name||'Cheapest beer';
  const wsEl=document.getElementById('sb-website');
  if(bar.website){wsEl.href=bar.website; wsEl.style.display='';}else wsEl.style.display='none';
  const updated=bar.last_updated?new Date(bar.last_updated).toLocaleDateString('sv-SE'):'‚Äî';
  document.getElementById('sb-updated').textContent='Updated '+updated;
  // Dance floor info
  const danceEl=document.getElementById('sb-dance');
  if(bar.dance_floor && bar.dance_floor !== 'unknown'){
    let txt = bar.dance_floor === 'yes' ? 'Dance floor: Yes' :
              bar.dance_floor === 'no' ? 'Dance floor: No' :
              'Dance floor: ' + String(bar.dance_floor);
    if(bar.dance_notes){
      txt += ' ‚Äî ' + bar.dance_notes;
    }
    danceEl.textContent = txt;
  } else {
    danceEl.textContent = 'Dance floor: Unknown';
  }
  // Opening hours summary (very simple)
  const hoursEl=document.getElementById('sb-hours');
  const oh = bar.opening_hours;
  if(!oh){
    hoursEl.textContent = 'Opening hours: ‚Äî';
  } else if (typeof oh === 'string'){
    hoursEl.textContent = 'Opening hours: ' + oh;
  } else {
    try{
      const entries = Object.entries(oh).filter(([_,v]) => v);
      if(entries.length === 0){
        hoursEl.textContent = 'Opening hours: ‚Äî';
      }else{
        const firstFew = entries.slice(0,3).map(([day,v]) => `${day}: ${v}`).join(' ¬∑ ');
        hoursEl.textContent = 'Opening hours: ' + firstFew + (entries.length>3 ? ' ‚Ä¶' : '');
      }
    }catch(e){
      hoursEl.textContent = 'Opening hours: ‚Äî';
    }
  }
  document.getElementById('sidebar').classList.add('open');
};

window._openSidebar=function(id){const bar=allBars.find(b=>b.id===id);if(bar)openSidebar(bar);}
window.closeSidebar=function(){document.getElementById('sidebar').classList.remove('open');}

const slider=document.getElementById('price-filter'); const display=document.getElementById('price-display');
slider.addEventListener('input',()=>{
  const val=parseInt(slider.value);
  display.textContent=val>=150?'All prices':'Max '+val+' kr';
  const pct=((val-40)/(150-40))*100;
  slider.style.background=`linear-gradient(to right, #f5c542 0%, #f5c542 ${pct}%, rgba(255,255,255,0.1) ${pct}%)`;
  const filtered=val>=150?allBars:allBars.filter(b=>!b.price_found||b.cheapest_beer_sek<=val);
  renderMarkers(filtered); updateStats(filtered.filter(b=>b.price_found));
  document.getElementById('stat-bars').textContent=filtered.length;
});

window.openModal=function(){document.getElementById('modal-overlay').classList.add('open');}
window.closeModal=function(){document.getElementById('modal-overlay').classList.remove('open');document.getElementById('modal-price').value='';document.getElementById('modal-beer').value='';}

window.submitSuggestion=async function(){
  const price=parseInt(document.getElementById('modal-price').value);
  const beer=document.getElementById('modal-beer').value;
  if(!price||price<20||price>500){alert('Please enter a valid price between 20‚Äì500 kr');return;}
  if(!activeSidebarBar){alert('No bar selected');return;}

  try{
    const payload = {
      bar_id: activeSidebarBar.id,
      bar_name: activeSidebarBar.name,
      suggested_price: price,
      beer_name: beer || null,
      submitted_at: new Date().toISOString()
    };
    const { data, error } = await supabase.from('suggestions').insert([payload]);
    if(error){ throw error; }
    closeModal(); alert('Thanks! Your suggestion has been submitted for review üç∫');
  }catch(err){
    console.error("Suggestion submit error:", err);
    alert('Failed to submit suggestion. See console for details.');
  }
};

// ensure we initialize after defining functions
loadBars();
</script>

</body>
</html>